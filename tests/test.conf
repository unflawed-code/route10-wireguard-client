#!/bin/sh
# Test Configuration - Source this file from all test scripts
# Usage: . "${0%/*}/../test.conf" (from plugins subdirectory)
#        . "${0%/*}/test.conf" (from tests directory)

# Absolute path to the script root directory
SCRIPT_ROOT="/cfg/wg-custom"

# Directory paths
PLUGIN_DIR="${SCRIPT_ROOT}/plugins"
LIB_DIR="${SCRIPT_ROOT}/lib"
TESTS_DIR="${SCRIPT_ROOT}/tests"

# Temp/runtime paths
WG_TMP_DIR="/tmp/wg-custom"
STAGING_DB="${WG_TMP_DIR}/staging_db"
WG_REGISTRY="${WG_TMP_DIR}/registry"
WG_DB="${WG_TMP_DIR}/wg_pbr.db"

# Test-specific temp files
TEST_CONF="/tmp/test.conf"

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

# Common test helper functions
pass_count=0
fail_count=0

log_pass() {
    echo "${GREEN}pass${NC}: $1"
    pass_count=$((pass_count + 1))
}

log_fail() {
    echo "${RED}fail${NC}: $1"
    fail_count=$((fail_count + 1))
}

log_info() {
    echo "${YELLOW}INFO${NC}: $1"
}

log_skip() {
    echo "${YELLOW}SKIP${NC}: $1"
}

# Print test summary
test_summary() {
    echo ""
    echo "=========================================="
    echo " Test Results"
    echo "=========================================="
    echo "Passed: ${pass_count}"
    echo "Failed: ${fail_count}"
    echo ""
    
    if [ "$fail_count" -eq 0 ]; then
        echo "${GREEN}All tests passed!${NC}"
        return 0
    else
        echo "${RED}Some tests failed.${NC}"
        return 1
    fi
}
